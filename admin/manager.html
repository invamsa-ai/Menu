<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master Control - Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§</title>
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

    <script src="../js/firebase-config.js"></script>

    <style>
        :root { --primary: #FF6B00; --bg: #1a1a1a; --card-bg: #2d2d2d; --text: #eee; --border: #444; }
        
        * { box-sizing: border-box; font-family: 'Cairo', sans-serif; }
        body { background: var(--bg); color: var(--text); margin: 0; padding: 20px; }
        
        .container { max-width: 1400px; margin: 0 auto; }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .header {
            display: flex; justify-content: space-between; align-items: center;
            background: var(--card-bg); padding: 20px; border-radius: 15px;
            margin-bottom: 30px; border-right: 5px solid var(--primary);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        .card {
            background: var(--card-bg); padding: 25px; border-radius: 15px;
            margin-bottom: 25px; border: 1px solid var(--border);
        }
        
        h2, h3 { margin-top: 0; color: #fff; }
        
        /* Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { padding: 15px; text-align: right; border-bottom: 1px solid var(--border); vertical-align: middle; }
        th { color: #aaa; font-size: 0.9rem; background: #252525; }
        tr:hover { background: #353535; }
        
        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .btn {
            padding: 8px 15px; border-radius: 8px; border: none; cursor: pointer;
            font-weight: bold; transition: 0.2s; display: inline-flex; align-items: center; gap: 5px;
        }
        .btn-create { background: var(--primary); color: white; width: 100%; padding: 12px; font-size: 1.1rem; justify-content: center; margin-top: 15px; }
        .btn-delete { background: #ff4757; color: white; }
        .btn-edit { background: #2ed573; color: white; }
        .btn:hover { opacity: 0.9; transform: translateY(-1px); }

        /* Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø·Ø¹Ù… */
        .status-badge { padding: 4px 10px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; }
        .open { background: rgba(46, 213, 115, 0.2); color: #2ed573; }
        .closed { background: rgba(255, 71, 87, 0.2); color: #ff4757; }

        /* Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ù„ØªØ¹Ø¯ÙŠÙ„ */
        .grid-form { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
        .input-group label { display: block; margin-bottom: 8px; color: #bbb; font-size: 0.9rem; }
        input, select {
            background: #404040; border: 1px solid var(--border); color: white;
            padding: 12px; border-radius: 8px; width: 100%; outline: none;
        }
        input:focus { border-color: var(--primary); }

        /* Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ */
        .social-inputs { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border); }
        .social-input-wrapper { position: relative; }
        .social-input-wrapper i { position: absolute; top: 50%; right: 12px; transform: translateY(-50%); color: #888; }
        .social-input-wrapper input { padding-right: 35px; font-size: 0.9rem; }

        /* Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;
        }
        .modal-content {
            background: #2d2d2d; padding: 30px; border-radius: 15px; width: 90%; max-width: 800px;
            max-height: 90vh; overflow-y: auto; border: 1px solid var(--border);
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <div>
                <h1 style="margin:0; font-size:1.8rem;">Master Control <span style="color:var(--primary)">V2</span></h1>
                <small style="color:#aaa;">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…</small>
            </div>
            <div id="connectionStatus" style="color: #2ed573; font-weight:bold;">
                <i class="fas fa-wifi"></i> Ù…ØªØµÙ„
            </div>
        </div>

        <div class="card">
            <h3><i class="fas fa-store"></i> ØªØ³Ø¬ÙŠÙ„ Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯</h3>
            <div class="grid-form">
                <div class="input-group">
                    <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                    <input type="email" id="newEmail" placeholder="email@example.com">
                </div>
                <div class="input-group">
                    <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                    <input type="text" id="newPass" placeholder="******">
                </div>
            </div>
            
            <div class="social-inputs">
                <div class="social-input-wrapper"><i class="fab fa-whatsapp"></i><input type="text" id="newWa" placeholder="ÙˆØ§ØªØ³Ø§Ø¨ (966..)"></div>
                <div class="social-input-wrapper"><i class="fab fa-instagram"></i><input type="text" id="newInsta" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…"></div>
                <div class="social-input-wrapper"><i class="fab fa-snapchat"></i><input type="text" id="newSnap" placeholder="Ø±Ø§Ø¨Ø· Ø³Ù†Ø§Ø¨"></div>
                <div class="social-input-wrapper"><i class="fab fa-tiktok"></i><input type="text" id="newTiktok" placeholder="Ø±Ø§Ø¨Ø· ØªÙŠÙƒ ØªÙˆÙƒ"></div>
            </div>

            <button onclick="createAccount()" class="btn btn-create">
                <i class="fas fa-plus-circle"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙˆØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            </button>
        </div>

        <div class="card">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                <h3><i class="fas fa-list"></i> Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ù…Ø³Ø¬Ù„Ø© (<span id="count">0</span>)</h3>
                <input type="text" placeholder="Ø¨Ø­Ø«..." style="width:200px; padding:8px;" onkeyup="filterTable(this.value)">
            </div>
            <div style="overflow-x:auto;">
                <table id="mainTable">
                    <thead>
                        <tr>
                            <th>Ø§Ù„Ù…Ø·Ø¹Ù…</th>
                            <th>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</th>
                            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            <th>Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</th>
                            <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="restList">
                        <tr><td colspan="5" style="text-align:center">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="editModal" class="modal">
        <div class="modal-content">
            <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
                <h3>ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…</h3>
                <i class="fas fa-times" onclick="closeEditModal()" style="cursor:pointer; font-size:1.5rem;"></i>
            </div>
            
            <input type="hidden" id="editUid">
            
            <div class="grid-form">
                <div class="input-group">
                    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…</label>
                    <input type="text" id="editName">
                </div>
                <div class="input-group">
                    <label>Ø§Ù„Ø¹Ù…Ù„Ø©</label>
                    <input type="text" id="editCurrency">
                </div>
                <div class="input-group">
                    <label>Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø·Ø¹Ù…</label>
                    <select id="editStatus">
                        <option value="open">ğŸŸ¢ Ù…ÙØªÙˆØ­</option>
                        <option value="closed">ğŸ”´ Ù…ØºÙ„Ù‚</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Ù†Ø¸Ø§Ù… Ø§Ù„Ø·Ù„Ø¨Ø§Øª</label>
                    <select id="editOrdering">
                        <option value="true">âœ… Ù…ÙØ¹Ù„</option>
                        <option value="false">â›” Ù…Ø¹Ø·Ù„</option>
                    </select>
                </div>
                
                <div class="input-group" style="grid-column: 1 / -1; border-top:1px solid #444; padding-top:10px; margin-top:10px;">
                    <label style="color:#fab1a0">ØªØ¹Ø¯ÙŠÙ„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (Ù„Ù„Ø¹Ø±Ø¶ ÙÙ‚Ø·)</label>
                    <input type="text" id="editSavedPass" placeholder="Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ø­ÙØ¸Ù‡Ø§ Ù‡Ù†Ø§">
                    <small style="color:#888;">* Ù‡Ø°Ø§ ÙŠØºÙŠØ± Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø³Ø¬Ù„Ø© ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¹Ø±Ø¶ØŒ Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙØ¹Ù„ÙŠ Ø§Ø³ØªØ®Ø¯Ù… Ù„ÙˆØ­Ø© ÙÙŠØ±Ø¨ÙŠØ³ Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†.</small>
                </div>
            </div>

            <h4 style="margin:20px 0 10px; border-bottom:1px solid #444; padding-bottom:5px;">Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªÙˆØ§ØµÙ„</h4>
            <div class="social-inputs">
                <div class="social-input-wrapper"><i class="fab fa-whatsapp"></i><input type="text" id="editWa"></div>
                <div class="social-input-wrapper"><i class="fab fa-instagram"></i><input type="text" id="editInsta"></div>
                <div class="social-input-wrapper"><i class="fab fa-snapchat"></i><input type="text" id="editSnap"></div>
                <div class="social-input-wrapper"><i class="fab fa-tiktok"></i><input type="text" id="editTiktok"></div>
            </div>

            <button onclick="saveEdit()" class="btn btn-create" style="background:#2ed573; margin-top:20px;">
                <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
            </button>
        </div>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
        const ADMIN_EMAIL = "admin@menunow.com"; 
        const ADMIN_PASS = "123456"; 

        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        auth.onAuthStateChanged(user => {
            if (!user) {
                auth.signInWithEmailAndPassword(ADMIN_EMAIL, ADMIN_PASS).catch(e => console.log(e));
            } else {
                loadRestaurants();
            }
        });

        // 1. Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
        async function createAccount() {
            const email = document.getElementById('newEmail').value;
            const pass = document.getElementById('newPass').value;
            const wa = document.getElementById('newWa').value;
            const insta = document.getElementById('newInsta').value;
            const snap = document.getElementById('newSnap').value;
            const tiktok = document.getElementById('newTiktok').value;
            const btn = document.querySelector('.btn-create');

            if(!email || !pass) return alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±!");

            btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¹Ù…Ù„...";
            
            try {
                // Ø¥Ù†Ø´Ø§Ø¡ ÙÙŠ Authentication
                const secondaryApp = firebase.initializeApp(firebaseConfig, "Secondary");
                const userCred = await secondaryApp.auth().createUserWithEmailAndPassword(email, pass);
                const uid = userCred.user.uid;

                // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§Ù…Ù„Ø©
                await db.collection('restaurants').doc(uid).set({
                    owner_id: uid,
                    email: email,
                    saved_password: pass, // Ø­ÙØ¸ Ø§Ù„Ø¨Ø§Ø³ÙˆÙˆØ±Ø¯
                    name: "Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯",
                    currency: "Ø±.Ø³",
                    status: "open",
                    ordering_enabled: true,
                    created_at: firebase.firestore.FieldValue.serverTimestamp(),
                    social: { whatsapp: wa, instagram: insta, snapchat: snap, tiktok: tiktok }
                });

                secondaryApp.auth().signOut();
                secondaryApp.delete();

                alert("ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ù†Ø¬Ø§Ø­!");
                location.reload(); // ØªØ­Ø¯ÙŠØ« Ù„ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
            } catch (err) {
                alert("Ø®Ø·Ø£: " + err.message);
            } finally {
                btn.innerHTML = '<i class="fas fa-plus-circle"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙˆØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª';
            }
        }

        // 2. Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…
        function loadRestaurants() {
            db.collection('restaurants').orderBy('created_at', 'desc').onSnapshot(snap => {
                const tbody = document.getElementById('restList');
                tbody.innerHTML = '';
                let count = 0;

                snap.forEach(doc => {
                    const data = doc.data();
                    if(data.email === ADMIN_EMAIL) return; // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø¯Ù…Ù†

                    count++;
                    const statusClass = data.status === 'open' ? 'open' : 'closed';
                    const statusText = data.status === 'open' ? 'Ù…ÙØªÙˆØ­' : 'Ù…ØºÙ„Ù‚';
                    const social = data.social || {};

                    // Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
                    let socialIcons = '';
                    if(social.whatsapp) socialIcons += '<i class="fab fa-whatsapp" style="color:#25D366; margin-left:5px;"></i>';
                    if(social.instagram) socialIcons += '<i class="fab fa-instagram" style="color:#E1306C; margin-left:5px;"></i>';
                    if(social.snapchat) socialIcons += '<i class="fab fa-snapchat" style="color:#FFFC00; margin-left:5px;"></i>';
                    if(social.tiktok) socialIcons += '<i class="fab fa-tiktok" style="color:#fff; margin-left:5px;"></i>';

                    tbody.innerHTML += `
                        <tr>
                            <td>
                                <div style="font-weight:bold; font-size:1.1rem;">${data.name || 'Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…'}</div>
                                <div style="color:#888; font-size:0.8rem;">${doc.id}</div>
                            </td>
                            <td>
                                <div>${data.email}</div>
                                <div style="color:#fab1a0; font-family:monospace;">Pass: ${data.saved_password || '---'}</div>
                            </td>
                            <td>
                                <span class="status-badge ${statusClass}">${statusText}</span>
                                <div style="font-size:0.8rem; margin-top:5px;">${data.ordering_enabled ? 'âœ… Ø·Ù„Ø¨Ø§Øª' : 'â›” Ø¹Ø±Ø¶'}</div>
                            </td>
                            <td>${socialIcons || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯'}</td>
                            <td>
                                <button class="btn btn-edit" onclick="openEditModal('${doc.id}')"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-delete" onclick="deleteRestaurant('${doc.id}', '${data.name}')"><i class="fas fa-trash"></i></button>
                            </td>
                        </tr>
                    `;
                });
                document.getElementById('count').innerText = count;
            });
        }

        // 3. ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
        async function openEditModal(uid) {
            const doc = await db.collection('restaurants').doc(uid).get();
            const data = doc.data();
            const social = data.social || {};

            document.getElementById('editUid').value = uid;
            document.getElementById('editName').value = data.name || '';
            document.getElementById('editCurrency').value = data.currency || '';
            document.getElementById('editStatus').value = data.status || 'open';
            document.getElementById('editOrdering').value = data.ordering_enabled ? 'true' : 'false';
            document.getElementById('editSavedPass').value = data.saved_password || '';

            document.getElementById('editWa').value = social.whatsapp || '';
            document.getElementById('editInsta').value = social.instagram || '';
            document.getElementById('editSnap').value = social.snapchat || '';
            document.getElementById('editTiktok').value = social.tiktok || '';

            document.getElementById('editModal').style.display = 'flex';
        }

        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
        }

        // 4. Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª
        async function saveEdit() {
            const uid = document.getElementById('editUid').value;
            
            const updateData = {
                name: document.getElementById('editName').value,
                currency: document.getElementById('editCurrency').value,
                status: document.getElementById('editStatus').value,
                ordering_enabled: document.getElementById('editOrdering').value === 'true',
                saved_password: document.getElementById('editSavedPass').value, // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø§Ø³ÙˆÙˆØ±Ø¯
                social: {
                    whatsapp: document.getElementById('editWa').value,
                    instagram: document.getElementById('editInsta').value,
                    snapchat: document.getElementById('editSnap').value,
                    tiktok: document.getElementById('editTiktok').value
                }
            };

            try {
                await db.collection('restaurants').doc(uid).update(updateData);
                alert("ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!");
                closeEditModal();
            } catch(e) {
                alert("Ø®Ø·Ø£: " + e.message);
            }
        }

        // 5. Ø­Ø°Ù Ù…Ø·Ø¹Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
        async function deleteRestaurant(uid, name) {
            const confirmCode = prompt(`ØªØ­Ø°ÙŠØ±: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø·Ø¹Ù… ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„Ø£Ù‚Ø³Ø§Ù… Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹!\n\nÙ„Ø­Ø°Ù "${name}"ØŒ Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© "Ø­Ø°Ù":`);
            if(confirmCode !== "Ø­Ø°Ù") return;

            try {
                const batch = db.batch();
                
                // Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                const prods = await db.collection('products').where('restaurant_id', '==', uid).get();
                prods.forEach(doc => batch.delete(doc.ref));

                // Ø­Ø°Ù Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
                const cats = await db.collection('categories').where('restaurant_id', '==', uid).get();
                cats.forEach(doc => batch.delete(doc.ref));

                // Ø­Ø°Ù Ø§Ù„Ù…Ø·Ø¹Ù…
                batch.delete(db.collection('restaurants').doc(uid));

                await batch.commit();
                alert("ØªÙ… Ø§Ù„Ø­Ø°Ù.");
            } catch(e) {
                alert("Ø®Ø·Ø£: " + e.message);
            }
        }

        // ÙÙ„ØªØ±Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„
        function filterTable(text) {
            const filter = text.toLowerCase();
            const rows = document.getElementById("mainTable").getElementsByTagName("tr");
            for (let i = 1; i < rows.length; i++) {
                let found = false;
                const cells = rows[i].getElementsByTagName("td");
                for (let j = 0; j < cells.length; j++) {
                    if (cells[j].innerText.toLowerCase().indexOf(filter) > -1) {
                        found = true;
                        break;
                    }
                }
                rows[i].style.display = found ? "" : "none";
            }
        }
    </script>

</body>
</html>
